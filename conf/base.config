/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ebi-metagenomics/mgnifams Nextflow base config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    A 'blank slate' config file, appropriate for general use on most high performance
    compute environments. Assumes that all software is installed and available on
    the PATH. Runs in `local` mode - all jobs will be run on the logged in environment.
----------------------------------------------------------------------------------------
*/

process {

    cpus   = 1
    memory = '6.GB'
    time   = '4h'

    withLabel: venv    { memory = '6.0 GB'; time = '10m' }    
    withLabel: general { memory = '100.0 MB'; time = '1m' }

    // SETUP_CLUSTERS
    // preprocess_input
    withName: DECOMPRESS_GZ  { cpus = 8; memory = '50.0 MB'; time = '5h' }
    withName: DECOMPRESS_BZ2 { memory = '50.0 MB'; time = '5h' }
    withName: REMOVE_HEADER  { memory = '50.0 MB'; time = '1h' }
    // initiate_proteins
    withName: FILTER_UNANNOTATED_SLICES { memory = '60.0 MB'; time = '1h' }
    // execute_clustering
    withName: MMSEQS_CREATEDB     { memory = '40.0 GB'; time = '1h' }
    withName: MMSEQS_LINCLUST     { cpus = 8; memory = '260.0 GB'; time = '3h' }
    withName: EXPORT_CLUSTERS_TSV { cpus = 2; memory = '65.0 GB'; time = '20m' }

}
